#!/usr/bin/env ruby

`git for-each-ref --sort=-committerdate refs/heads/`
  .split("\n")
  .reverse
  .map do |line|
    line.split("/").last
  end
  .map do |branch|
    `git log #{branch} --format="%s" --author="Tristan Dunn" --since="24 hours ago"`
      .split("\n")
      .each.with_index do |log, index|
        if index == 0
          puts "\n"
          puts "  \033[1;32;9m#{branch}\033[0m"
        end

        puts "    * #{log}"
      end
  end

puts "\n"
